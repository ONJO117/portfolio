-- 질문 ?? ???
DROP TABLE qna;
DROP SEQUENCE qna_seq;

-- 객체 ??
CREATE TABLE qna(
    no NUMBER PRIMARY KEY,
    title VARCHAR2(300) NOT NULL,
    content VARCHAR2(2000) NOT NULL,
    id VARCHAR(20) NOT NULL REFERENCES member(id),
    writeDate DATE DEFAULT SYSDATE,
    hit NUMBER DEFAULT 0,
    refNo NUMBER REFERENCES qna(no), -- ReferencesNo : 참조 ?고있? ?번호 (맨처?? ?? ?)
    ordNo NUMBER, -- OrderNo : ??번호 ( ??? 봤을? ?? ?? ???????.) 
    levNo NUMBER, -- ???? (맨처? 질문?? ???기?? ?? ???. 0 / ????? +1 ?? ???? ??.)
    parentNo NUMBER REFERENCES qna(no) ON DELETE CASCADE -- ?? ?? ???? 밑에 ?? ?? // ?모키? ?? ? ?? ?? ??
);

-- ??즈 ??
CREATE SEQUENCE qna_seq;

--   
-- 1. ϱ 
INSERT INTO qna(no, title, content, id, refNo, ordNo, levNo) 
VALUES(qna_seq.NEXTVAL, 'Ʈ1?', 'Ʈ', 'test', qna_seq.NEXTVAL, 1, 0);
COMMIT;

-- 2. ????
-- 질문? 보고 ????.
-- 보고 ?? ?(1? ?) : ?모?(parentNo) -> 1? ?
-- ?? ?(refNo) : 최초 질문? ?번호 -> 1?
-- ??번호(ordNo) : ???? ??? 질문? ?? 그에 ??? ???? ?? ??? ??개면 최근? ??? ??? ?? ?치하? 만드? 번호
-- ????(levNo) : ?면에 ?마나 ???? ??? ??? 번호
-- 1  亯
INSERT INTO qna(no, title, content, id, refNo, ordNo, levNo, parentNo) 
VALUES(qna_seq.NEXTVAL, 'Ʈ1', 'Ʈ̴', 'admin', 1, 2, 1, 1);
COMMIT;

--list
SELECT no,title, content, writeDate, hit, refNo, ordNo, levNO, parentNo
FROM qna ORDER BY refNo desc, ordNO;

--ROLLBACK;